namespace xrossover;

table ConnectionRequest {
	username: string;
	udpaddr: string;
}

struct Vector3 {
	x: float;
	y: float;
	z: float;
}

table PlayerBox {
	id: string;
	owner: string;
	position: Vector3;
}

table Movement {
	object_id: string;
	object_owner: string;
	direction: Vector3;
}

// table PlayerInput {
//	username: string;
//	object_id: string;
//	input: string;
//}

union GameObjectUnion { PlayerBox }

table GameObjectWrapper {
	object: GameObjectUnion;
}

table ObjectRegistry {
	objects: [GameObjectWrapper];
}

union Payload {
	ConnectionRequest,
	ObjectRegistry,
	PlayerBox,
	Movement
}

table NetworkMessage {
	payload: Payload;
}

root_type NetworkMessage;
